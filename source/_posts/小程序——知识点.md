---
title: 小程序——知识点
date: 2021-09-26 14:55:20
tags:
---

### 小程序启动
* 冷启动——小程序重新加载后启动，用户首次打开或小程序销毁后再次打开
* 热启动——用户打开过小程序，过一定时间后再次打开，（小程序未被销毁，仅由后台进入前台）

### 小程序中的 `<slot>` 的使用
> 需要承载组件引用时，父组件提供的子节点
```html
<!-- 组件模板 -->
<view class="wrapper">
  <view>这里是组件的内部节点</view>
  <slot></slot>
</view>
```
```html
<!-- 引用组件的页面模板 -->
<view>
  <component-tag-name>
    <!-- 这部分内容将被放置在组件 <slot> 的位置上 -->
    <view>这里是插入到组件slot中的内容</view>
  </component-tag-name>
</view>
```

### 小程序中解析文本中的换行符
> 使用富文本标签解析 `item.text text 中包含换行符 \n\r`
```wxml
<rich-text nodes="{{item.text}}"></rich-text>
```
> js 中将换行符 \n\r 替换成 <br />
```javascript
properties: {
  text: {
    type: String,
    default: '',  
    observer: (val)=>{
      val.replace(/\n/g, '<br />')
    }  
  }
}
```

### 小程序保存页面
> 1、 `wx.getImageInfo` 获取图片信息
> 2、 `wx.saveImageToPhotosAlbum` 保存图片信息
> ** canvas 绘制 暂时省略**
```javascript
wx.getImageInfo({
  src: vegetablesImg.img_vegetables_trial_longImg, // 暂时是一个远程地址
  success(res) {
    const { path } = res;
    wx.saveImageToPhotosAlbum({
      filePath: path,
      success(res) {
        successHandler({
          msg: '保存成功'
        })
      },
      fail(err) {
        exceptionHandler({
          msg: '处理中...',
          apiResult: err
        })
      }
    })
  }
})
```

### 小程序获取用户的手机号
![alt](/images/miniPrograme/get_phone_number.png)

### 组件样式
> 组件对应的 wxss 文件样式，只对组件 wxml 内的节点生效。
### <font color="#F30">组件样式注意事项：</font>
*   组件与引用组件的页面**不能使用 id 选择器，属性选择器，标签选择器**<u>使用类选择器</u>
*   组件与引用组件的页面中**避免使用后代选择器
*   子元素选择器不用于非view组件及期子节点
*   font/color 等会从组件外继承至组件内
*   app.wxss 中的样式，组件所在页面的样式对自定义组件无效（通过添加属性
    options: {
        addGlobalClass: true
    }）

### 小程序组件使用
#### <font color="#f30">有关 picker-view 的 value 属性</font>
> value 需要在 onLoad 中对 value 重新赋值
